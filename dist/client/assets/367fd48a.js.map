{"version":3,"file":"367fd48a.js","sources":["../../../node_modules/@shopify/hydrogen/dist/esnext/utilities/image_size.js","../../../node_modules/@shopify/hydrogen/dist/esnext/components/Image/Image.js"],"sourcesContent":["// TODO: Are there other CDNs missing from here?\nconst PRODUCTION_CDN_HOSTNAMES = [\n    'cdn.shopify.com',\n    'cdn.shopifycdn.net',\n    'shopify-assets.shopifycdn.com',\n    'shopify-assets.shopifycdn.net',\n];\nconst LOCAL_CDN_HOSTNAMES = ['spin.dev'];\nconst ALL_CDN_HOSTNAMES = [...PRODUCTION_CDN_HOSTNAMES, ...LOCAL_CDN_HOSTNAMES];\n/**\n * Adds image size parameters to an image URL hosted by Shopify's CDN\n */\nexport function addImageSizeParametersToUrl({ src, width, height, crop, scale, }) {\n    const newUrl = new URL(src);\n    width && newUrl.searchParams.append('width', width.toString());\n    height && newUrl.searchParams.append('height', height.toString());\n    crop && newUrl.searchParams.append('crop', crop);\n    scale && newUrl.searchParams.append('scale', scale.toString());\n    return newUrl.toString();\n}\nexport function shopifyImageLoader(params) {\n    const newSrc = new URL(params.src);\n    const isShopifyServedImage = ALL_CDN_HOSTNAMES.some((allowedHostname) => newSrc.hostname.endsWith(allowedHostname));\n    if (!isShopifyServedImage ||\n        (!params.width && !params.height && !params.crop && !params.scale)) {\n        return params.src;\n    }\n    return addImageSizeParametersToUrl(params);\n}\nexport function getShopifyImageDimensions(image, options) {\n    // Storefront API could return null dimension values for images that are not hosted on Shopify CDN\n    // The API dimensions references the image's intrinstic/natural dimensions and provides image aspect ratio information\n    const apiWidth = image.width;\n    const apiHeight = image.height;\n    if (apiWidth && apiHeight && ((options === null || options === void 0 ? void 0 : options.width) || (options === null || options === void 0 ? void 0 : options.height))) {\n        const optionWidth = (options === null || options === void 0 ? void 0 : options.width)\n            ? parseInt(options.width.toString(), 10)\n            : undefined;\n        const optionHeight = (options === null || options === void 0 ? void 0 : options.height)\n            ? parseInt(options.height.toString(), 10)\n            : undefined;\n        // Use option defined width & height\n        if (optionWidth && optionHeight) {\n            return { width: optionWidth, height: optionHeight };\n        }\n        // Calculate width from aspect ratio\n        if (!optionWidth && optionHeight) {\n            return {\n                width: Math.round((apiWidth / apiHeight) * optionHeight),\n                height: optionHeight,\n            };\n        }\n        // Calculate height from aspect ratio\n        if (optionWidth && !optionHeight) {\n            return {\n                width: optionWidth,\n                height: Math.round((apiHeight / apiWidth) * optionWidth),\n            };\n        }\n    }\n    return { width: apiWidth, height: apiHeight };\n}\n","import * as React from 'react';\nimport { getShopifyImageDimensions, shopifyImageLoader } from '../../utilities';\nexport function Image(props) {\n    if (!props.data && !props.src) {\n        throw new Error(`<Image/>: requires either a 'data' or 'src' prop.`);\n    }\n    if (props.data && props.src) {\n        console.warn(`<Image/>: using both 'data' and 'src' props is not supported; using the 'data' prop by default`);\n    }\n    if (props.data) {\n        return React.createElement(ShopifyImage, { ...props });\n    }\n    else {\n        return React.createElement(ExternalImage, { ...props });\n    }\n}\nfunction ShopifyImage({ data, width, height, loading, loader = shopifyImageLoader, loaderOptions, ...rest }) {\n    var _a, _b, _c;\n    if (!data.url) {\n        throw new Error(`<Image/>: the 'data' prop requires the 'url' property`);\n    }\n    if (!data.altText && !rest.alt) {\n        console.warn(`<Image/>: the 'data' prop should have the 'altText' property, or the 'alt' prop, and one of them should not be empty. ${data.id ? `Image ID: ${data.id}` : ''}`);\n    }\n    const { width: finalWidth, height: finalHeight } = getShopifyImageDimensions(data, loaderOptions);\n    if (!finalWidth || !finalHeight) {\n        console.warn(`<Image/>: the 'data' prop requires either 'width' or 'data.width', and 'height' or 'data.height' properties`);\n    }\n    let finalSrc = data.url;\n    if (loader) {\n        finalSrc = loader({\n            ...loaderOptions,\n            src: data.url,\n            width: finalWidth,\n            height: finalHeight,\n        });\n    }\n    /* eslint-disable hydrogen/prefer-image-component */\n    return (React.createElement(\"img\", { id: (_a = data.id) !== null && _a !== void 0 ? _a : '', alt: (_c = (_b = data.altText) !== null && _b !== void 0 ? _b : rest.alt) !== null && _c !== void 0 ? _c : '', loading: loading !== null && loading !== void 0 ? loading : 'lazy', ...rest, src: finalSrc, width: finalWidth !== null && finalWidth !== void 0 ? finalWidth : undefined, height: finalHeight !== null && finalHeight !== void 0 ? finalHeight : undefined }));\n    /* eslint-enable hydrogen/prefer-image-component */\n}\nfunction ExternalImage({ src, width, height, alt, loader, loaderOptions, loading, ...rest }) {\n    if (!width || !height) {\n        throw new Error(`<Image/>: when 'src' is provided, 'width' and 'height' are required and need to be valid values (i.e. greater than zero). Provided values: 'src': ${src}, 'width': ${width}, 'height': ${height}`);\n    }\n    if (!alt) {\n        console.warn(`<Image/>: when 'src' is provided, 'alt' should also be provided`);\n    }\n    let finalSrc = src;\n    if (loader) {\n        finalSrc = loader({ src, width, height, ...loaderOptions });\n        if (typeof finalSrc !== 'string' || !finalSrc) {\n            throw new Error(`<Image/>: 'loader' did not return a valid string`);\n        }\n    }\n    /* eslint-disable hydrogen/prefer-image-component */\n    return (React.createElement(\"img\", { ...rest, src: finalSrc, width: width, height: height, alt: alt !== null && alt !== void 0 ? alt : '', loading: loading !== null && loading !== void 0 ? loading : 'lazy' }));\n    /* eslint-enable hydrogen/prefer-image-component */\n}\n"],"names":["React.createElement"],"mappings":"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"}