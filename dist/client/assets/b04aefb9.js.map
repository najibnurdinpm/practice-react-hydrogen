{"version":3,"file":"b04aefb9.js","sources":["../../../src/components/MobileCountrySelector.client.jsx"],"sourcesContent":["import {useCallback, useState, Suspense} from 'react';\nimport {useCountry} from '@shopify/hydrogen/client';\nimport {Listbox} from '@headlessui/react';\nimport SpinnerIcon from './SpinnerIcon.client';\n\nimport {ArrowIcon, Countries} from './CountrySelector.client';\n\n/**\n * A client component that selects the appropriate country to display for products on a mobile storefront\n */\nexport default function MobileCountrySelector() {\n  const [listboxOpen, setListboxOpen] = useState(false);\n  const [selectedCountry] = useCountry();\n\n  const setCountry = useCallback(({isoCode, name}) => {\n    fetch(`/countries`, {\n      body: JSON.stringify({isoCode, name}),\n      method: 'POST',\n    }).then(() => {\n      window.location.reload();\n    });\n  }, []);\n\n  return (\n    <div className=\"mt-8 rounded border border-gray-200 w-full\">\n      <Listbox onChange={setCountry}>\n        {({open}) => {\n          setTimeout(() => setListboxOpen(open));\n          return (\n            <>\n              <Listbox.Button className=\"w-full flex justify-between text-sm items-center py-5 px-7\">\n                {selectedCountry.name}\n                <ArrowIcon isOpen={open} />\n              </Listbox.Button>\n              <Listbox.Options className=\"w-full px-3 pb-2 text-lg overflow-y-auto h-64\">\n                <Listbox.Option\n                  disabled\n                  className=\"font-medium px-4 pb-4 w-full text-left uppercase\"\n                >\n                  Country\n                </Listbox.Option>\n                {listboxOpen && (\n                  <Suspense\n                    fallback={\n                      <div className=\"flex justify-center\">\n                        <SpinnerIcon />\n                      </div>\n                    }\n                  >\n                    <Countries\n                      selectedCountry={selectedCountry}\n                      getClassName={(active) => {\n                        return (\n                          `py-2 px-4 rounded flex justify-between items-center text-left ` +\n                          `w-full cursor-pointer ${\n                            active ? 'bg-gray-100' : null\n                          }`\n                        );\n                      }}\n                    />\n                  </Suspense>\n                )}\n              </Listbox.Options>\n            </>\n          );\n        }}\n      </Listbox>\n    </div>\n  );\n}\n"],"names":["listboxOpen","setListboxOpen","useState","selectedCountry","useCountry","setCountry","useCallback","isoCode","name","fetch","body","JSON","stringify","method","then","window","location","reload","Listbox","open","_Fragment","_jsxs","_jsx","Suspense","active"],"mappings":"gcAUgD,YAAA,CAC9C,KAAM,CAACA,EAAaC,GAAkBC,EAAAA,QAAAA,SAAS,EAAD,EACxC,CAACC,GAAmBC,IAEpBC,EAAaC,EAAAA,QAAAA,YAAY,CAAC,CAACC,UAASC,UAAU,CAClDC,MAAO,aAAa,CAClBC,KAAMC,KAAKC,UAAU,CAACL,UAASC,MAAAA,CAAzB,EACNK,OAAQ,MAAA,CAFL,EAGFC,KAAK,IAAM,CACZC,OAAOC,SAASC,QAAhB,CAJF,CAMD,EAAE,CAP2B,CAAA,EAS9B,SACE,MAAA,CAAK,UAAU,6CAAf,WACGC,EAAD,CAAS,SAAUb,EAAnB,SACG,CAAC,CAACc,UACU,YAAA,IAAMlB,EAAekB,CAAD,CAArB,IAERC,EAAA,CAAA,SACE,CAACC,EAAAH,EAAQ,OAAT,CAAgB,UAAU,6DAA1B,SAAA,CACGf,EAAgBK,OAChB,EAAD,CAAW,OAAQW,CAAAA,CAFrB,CAAA,CAAA,CAAA,EAICE,EAAAH,EAAQ,QAAT,CAAiB,UAAU,gDAA3B,SACE,CAACI,EAAAJ,EAAQ,OAAT,CACE,SADF,GAEE,UAAU,mDAFZ,SAAA,SAAA,CAAA,EAMClB,GACCsB,EAACC,mBAAD,CACE,WACE,MAAA,CAAK,UAAU,sBAAf,SACED,EAAC,EAAD,EAAA,CAAA,CAHN,EAAA,WAOG,EAAD,CACE,kBACA,aAAeE,AAAW,GAErB,uFAECA,EAAS,cAAgB,MAG9B,CATH,CAAA,CAfN,CAAA,CAAA,CALF,CAAA,CAAA,CADF,EAqCD,CAxCH,CAAA,CAFJ,CA8CD"}