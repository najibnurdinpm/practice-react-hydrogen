var x=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var $=(e,n)=>{var r={};for(var t in e)h.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&x)for(var t of x(e))n.indexOf(t)<0&&y.call(e,t)&&(r[t]=e[t]);return r};import{r as s,R as p}from"./index.12980c00.js";import{g as A,t as j,a as H,i as N,j as k,H as P,T as V,b as I,u as M,k as F,l as d,h as b,f as R,A as O,c as G,F as i,L as K}from"./8d3d07f5.js";var v=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(v||{});function S(){let e=s.exports.useRef(0);return A("keydown",n=>{n.key==="Tab"&&(e.current=n.shiftKey?1:0)},!0),e}function q(){let e=s.exports.useRef(!1);return j(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function z(...e){return s.exports.useMemo(()=>H(...e),[...e])}function T(e,n,r,t){let o=N(r);s.exports.useEffect(()=>{e=e!=null?e:window;function c(u){o.current(u)}return e.addEventListener(n,c,t),()=>e.removeEventListener(n,c,t)},[e,n,t])}function L(e,n){let r=s.exports.useRef([]),t=k(e);s.exports.useEffect(()=>{for(let[o,c]of n.entries())if(r.current[o]!==c){let u=t(n);return r.current=n,u}},[t,...n])}let C="div";var B=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(B||{});let _=Object.assign(P(function(e,n){let r=s.exports.useRef(null),t=V(r,n),E=e,{initialFocus:o,containers:c,features:u=30}=E,f=$(E,["initialFocus","containers","features"]);I()||(u=1);let l=z(r);J({ownerDocument:l},Boolean(u&16));let a=Q({ownerDocument:l,container:r,initialFocus:o},Boolean(u&2));U({ownerDocument:l,container:r,containers:c,previousActiveElement:a},Boolean(u&8));let D=S(),w=k(()=>{let m=r.current;!m||M(D.current,{[v.Forwards]:()=>F(m,d.First),[v.Backwards]:()=>F(m,d.Last)})}),g={ref:t};return p.createElement(p.Fragment,null,Boolean(u&4)&&p.createElement(b,{as:"button",type:"button",onFocus:w,features:R.Focusable}),O({ourProps:g,theirProps:f,defaultTag:C,name:"FocusTrap"}),Boolean(u&4)&&p.createElement(b,{as:"button",type:"button",onFocus:w,features:R.Focusable}))}),{features:B});function J({ownerDocument:e},n){let r=s.exports.useRef(null);T(e==null?void 0:e.defaultView,"focusout",o=>{!n||r.current||(r.current=o.target)},!0),L(()=>{n||(i(r.current),r.current=null)},[n]);let t=s.exports.useRef(!1);s.exports.useEffect(()=>(t.current=!1,()=>{t.current=!0,G(()=>{!t.current||(i(r.current),r.current=null)})}),[])}function Q({ownerDocument:e,container:n,initialFocus:r},t){let o=s.exports.useRef(null);return L(()=>{if(!t)return;let c=n.current;if(!c)return;let u=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===u){o.current=u;return}}else if(c.contains(u)){o.current=u;return}r!=null&&r.current?i(r.current):F(c,d.First)===K.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),o.current=e==null?void 0:e.activeElement},[t]),o}function U({ownerDocument:e,container:n,containers:r,previousActiveElement:t},o){let c=q();T(e==null?void 0:e.defaultView,"focus",u=>{if(!o||!c.current)return;let f=new Set(r==null?void 0:r.current);f.add(n);let l=t.current;if(!l)return;let a=u.target;a&&a instanceof HTMLElement?W(f,a)?(t.current=a,i(a)):(u.preventDefault(),u.stopPropagation(),i(l)):i(t.current)},!0)}function W(e,n){var r;for(let t of e)if((r=t.current)!=null&&r.contains(n))return!0;return!1}export{T as E,_ as f,z as n};
//# sourceMappingURL=4400136a.js.map
