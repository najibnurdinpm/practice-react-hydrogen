import{r as f,S as U,a as D,R as K}from"./index.12980c00.js";import{M as Y}from"./692be0fa.js";function S(){return S=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},S.apply(this,arguments)}var y;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(y||(y={}));var A=function(e){return e},M="beforeunload",G="popstate";function J(e){e===void 0&&(e={});var a=e,n=a.window,t=n===void 0?document.defaultView:n,s=t.history;function c(){var r=t.location,o=r.pathname,i=r.search,p=r.hash,l=s.state||{};return[l.idx,A({pathname:o,search:i,hash:p,state:l.usr||null,key:l.key||"default"})]}var u=null;function m(){if(u)d.call(u),u=null;else{var r=y.Pop,o=c(),i=o[0],p=o[1];if(d.length){if(i!=null){var l=h-i;l&&(u={action:r,location:p,retry:function(){P(l*-1)}},P(l))}}else E(r)}}t.addEventListener(G,m);var x=y.Pop,g=c(),h=g[0],v=g[1],k=V(),d=V();h==null&&(h=0,s.replaceState(S({},s.state,{idx:h}),""));function _(r){return typeof r=="string"?r:W(r)}function C(r,o){return o===void 0&&(o=null),A(S({pathname:v.pathname,hash:"",search:""},typeof r=="string"?X(r):r,{state:o,key:Q()}))}function O(r,o){return[{usr:r.state,key:r.key,idx:o},_(r)]}function T(r,o,i){return!d.length||(d.call({action:r,location:o,retry:i}),!1)}function E(r){x=r;var o=c();h=o[0],v=o[1],k.call({action:x,location:v})}function B(r,o){var i=y.Push,p=C(r,o);function l(){B(r,o)}if(T(i,p,l)){var w=O(p,h+1),R=w[0],b=w[1];try{s.pushState(R,"",b)}catch{t.location.assign(b)}E(i)}}function j(r,o){var i=y.Replace,p=C(r,o);function l(){j(r,o)}if(T(i,p,l)){var w=O(p,h),R=w[0],b=w[1];s.replaceState(R,"",b),E(i)}}function P(r){s.go(r)}var z={get action(){return x},get location(){return v},createHref:_,push:B,replace:j,go:P,back:function(){P(-1)},forward:function(){P(1)},listen:function(o){return k.push(o)},block:function(o){var i=d.push(o);return d.length===1&&t.addEventListener(M,$),function(){i(),d.length||t.removeEventListener(M,$)}}};return z}function $(e){e.preventDefault(),e.returnValue=""}function V(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(t){return t!==n})}},call:function(n){e.forEach(function(t){return t&&t(n)})}}}function Q(){return Math.random().toString(36).substr(2,8)}function W(e){var a=e.pathname,n=a===void 0?"/":a,t=e.search,s=t===void 0?"":t,c=e.hash,u=c===void 0?"":c;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),u&&u!=="#"&&(n+=u.charAt(0)==="#"?u:"#"+u),n}function X(e){var a={};if(e){var n=e.indexOf("#");n>=0&&(a.hash=e.substr(n),e=e.substr(0,n));var t=e.indexOf("?");t>=0&&(a.search=e.substr(t),e=e.substr(0,t)),e&&(a.pathname=e)}return a}function ae(){const e=f.exports.useContext(U);return e?{serverProps:e.serverProps,setServerProps:e.setServerProps,pending:e.pending}:{}}function Z(){var e;return(e=f.exports.useContext(U))!==null&&e!==void 0?e:{}}const L=f.exports.createContext({});let H=!0;const N={},F=({history:e,children:a})=>{const n=f.exports.useMemo(()=>e||J(),[e]),[t,s]=f.exports.useState(n.location),[c,u]=f.exports.useState(!1),{pending:m,locationServerProps:x,setLocationServerProps:g}=Z();return re({location:t,pending:m,serverProps:x,locationChanged:c,onFinishNavigating:()=>u(!1)}),f.exports.useLayoutEffect(()=>{const h=n.listen(({location:v})=>{N[t.key]=window.scrollY,g({pathname:v.pathname,search:v.search}),s(v),u(!0)});return()=>h()},[n,t,u,s,g]),D(L.Provider,{value:{history:n,location:t},children:a})};function q(){const e=f.exports.useContext(L);if(!e&&Y)throw new Error("useRouter must be used within a <Router> component");return e}function I(){return q().location}function ee(e){K.useEffect(()=>(window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}),[e])}function re({location:e,pending:a,serverProps:n,locationChanged:t,onFinishNavigating:s}){f.exports.useEffect(()=>{window.history.scrollRestoration="manual"},[]),ee(f.exports.useCallback(()=>{window.history.scrollRestoration="auto"},[])),f.exports.useLayoutEffect(()=>{if(H||!t){H=!1;return}const c=N[e.key];if(!a&&e.pathname===n.pathname&&e.search===n.search){if(e.hash){const m=document.querySelector(e.hash);if(m){m.scrollIntoView(),s();return}}if(c){window.scrollTo(0,c),s();return}window.scrollTo(0,0),s()}},[e.pathname,e.search,e.hash,e.key,a,n.pathname,n.search,t,s])}var se=Object.freeze(Object.defineProperty({__proto__:null,RouterContext:L,BrowserRouter:F,useRouter:q,useLocation:I},Symbol.toStringTag,{value:"Module"}));export{se as B,Z as a,ae as b,W as c,I as d,q as u};
//# sourceMappingURL=eb35c225.js.map
