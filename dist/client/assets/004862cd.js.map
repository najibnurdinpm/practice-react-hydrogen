{"version":3,"file":"004862cd.js","sources":["../../../node_modules/@shopify/hydrogen/dist/esnext/components/CartProvider/cart-queries.js","../../../node_modules/@shopify/hydrogen/dist/esnext/components/CartProvider/hooks.client.js"],"sourcesContent":["export const CartLineAdd = (cartFragment) => `\nmutation CartLineAdd($cartId: ID!, $lines: [CartLineInput!]!, $numCartLines: Int = 250, $country: CountryCode = ZZ) @inContext(country: $country) {\n  cartLinesAdd(cartId: $cartId, lines: $lines) {\n    cart {\n      ...CartFragment\n    }\n  }\n}\n\n${cartFragment}\n`;\nexport const CartCreate = (cartFragment) => `\nmutation CartCreate($input: CartInput!, $numCartLines: Int = 250, $country: CountryCode = ZZ) @inContext(country: $country) {\n  cartCreate(input: $input) {\n    cart {\n      ...CartFragment\n    }\n  }\n}\n\n${cartFragment}\n`;\nexport const CartLineRemove = (cartFragment) => `\nmutation CartLineRemove($cartId: ID!, $lines: [ID!]!, $numCartLines: Int = 250, $country: CountryCode = ZZ) @inContext(country: $country) {\n  cartLinesRemove(cartId: $cartId, lineIds: $lines) {\n    cart {\n      ...CartFragment\n    }\n  }\n}\n\n${cartFragment}\n`;\nexport const CartLineUpdate = (cartFragment) => `\nmutation CartLineUpdate($cartId: ID!, $lines: [CartLineUpdateInput!]!, $numCartLines: Int = 250, $country: CountryCode = ZZ) @inContext(country: $country) {\n  cartLinesUpdate(cartId: $cartId, lines: $lines) {\n    cart {\n      ...CartFragment\n    }\n  }\n}\n\n${cartFragment}\n`;\nexport const CartNoteUpdate = (cartFragment) => `\nmutation CartNoteUpdate($cartId: ID!, $note: String, $numCartLines: Int = 250, $country: CountryCode = ZZ) @inContext(country: $country) {\n  cartNoteUpdate(cartId: $cartId, note: $note) {\n    cart {\n      ...CartFragment\n    }\n  }\n}\n\n${cartFragment}\n`;\nexport const CartBuyerIdentityUpdate = (cartFragment) => `\nmutation CartBuyerIdentityUpdate(\n  $cartId: ID!\n  $buyerIdentity: CartBuyerIdentityInput!\n  $numCartLines: Int = 250\n  $country: CountryCode = ZZ\n) @inContext(country: $country) {\n  cartBuyerIdentityUpdate(cartId: $cartId, buyerIdentity: $buyerIdentity) {\n    cart {\n      ...CartFragment\n    }\n  }\n}\n\n${cartFragment}\n`;\nexport const CartAttributesUpdate = (cartFragment) => `\nmutation CartAttributesUpdate($attributes: [AttributeInput!]!, $cartId: ID!, $numCartLines: Int = 250, $country: CountryCode = ZZ) @inContext(country: $country) {\n  cartAttributesUpdate(attributes: $attributes, cartId: $cartId) {\n    cart {\n      ...CartFragment\n    }\n  }\n}\n\n${cartFragment}\n`;\nexport const CartDiscountCodesUpdate = (cartFragment) => `\nmutation CartDiscountCodesUpdate($cartId: ID!, $discountCodes: [String!], $numCartLines: Int = 250, $country: CountryCode = ZZ) @inContext(country: $country) {\n  cartDiscountCodesUpdate(cartId: $cartId, discountCodes: $discountCodes) {\n    cart {\n      ...CartFragment\n    }\n  }\n}\n\n${cartFragment}\n`;\nexport const CartQuery = (cartFragment) => `\nquery CartQuery($id: ID!, $numCartLines: Int = 250, $country: CountryCode = ZZ) @inContext(country: $country) {\n  cart(id: $id) {\n    ...CartFragment\n  }\n}\n\n${cartFragment}\n`;\nexport const defaultCartFragment = `\nfragment CartFragment on Cart {\n  id\n  checkoutUrl\n  buyerIdentity {\n    countryCode\n    customer {\n      id\n      email\n      firstName\n      lastName\n      displayName\n    }\n    email\n    phone\n  }\n  lines(first: $numCartLines) {\n    edges {\n      node {\n        id\n        quantity\n        attributes {\n          key\n          value\n        }\n        merchandise {\n          ... on ProductVariant {\n            id\n            availableForSale\n            compareAtPriceV2 {\n              ...MoneyFragment\n            }\n            priceV2 {\n              ...MoneyFragment\n            }\n            requiresShipping\n            title\n            image {\n              ...ImageFragment\n            }\n            product {\n              handle\n              title\n            }\n            selectedOptions {\n              name\n              value\n            }\n          }\n        }\n      }\n    }\n  }\n  estimatedCost {\n    subtotalAmount {\n      ...MoneyFragment\n    }\n    totalAmount {\n      ...MoneyFragment\n    }\n    totalDutyAmount {\n      ...MoneyFragment\n    }\n    totalTaxAmount {\n      ...MoneyFragment\n    }\n  }\n  note\n  attributes {\n    key\n    value\n  }\n  discountCodes {\n    code\n  }\n}\n\nfragment MoneyFragment on MoneyV2 {\n  currencyCode\n  amount\n}\nfragment ImageFragment on Image {\n  id\n  url\n  altText\n  width\n  height\n}\n`;\n","import React, { useState } from 'react';\nimport { useShop } from '../../foundation';\nimport { flattenConnection } from '../../utilities';\nimport { CartCreate } from './cart-queries';\nimport { useCart } from '../../hooks/useCart';\nexport function useCartFetch() {\n    const { storeDomain, storefrontApiVersion, storefrontToken } = useShop();\n    return React.useCallback(({ query, variables, }) => {\n        return fetch(`https://${storeDomain}/api/${storefrontApiVersion}/graphql.json`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-SDK-Variant': 'hydrogen',\n                'X-SDK-Version': storefrontApiVersion,\n                'X-Shopify-Storefront-Access-Token': storefrontToken,\n            },\n            body: JSON.stringify({\n                query: query.toString(),\n                variables,\n            }),\n        })\n            .then((res) => res.json())\n            .catch((error) => {\n            return {\n                data: undefined,\n                error: error.toString(),\n            };\n        });\n    }, [storeDomain, storefrontApiVersion, storefrontToken]);\n}\nexport function useInstantCheckout() {\n    const { cartFragment } = useCart();\n    const [cart, updateCart] = useState();\n    const [checkoutUrl, updateCheckoutUrl] = useState();\n    const [error, updateError] = useState();\n    const fetch = useCartFetch();\n    const createInstantCheckout = React.useCallback(async (cartInput) => {\n        var _a, _b;\n        const { data, error } = await fetch({\n            query: CartCreate(cartFragment),\n            variables: {\n                input: cartInput,\n            },\n        });\n        if (error) {\n            updateError(error);\n            updateCart(undefined);\n            updateCheckoutUrl(undefined);\n        }\n        if ((_a = data === null || data === void 0 ? void 0 : data.cartCreate) === null || _a === void 0 ? void 0 : _a.cart) {\n            const dataCart = data.cartCreate.cart;\n            updateCart({\n                ...dataCart,\n                // @ts-expect-error While the cart still uses fragments, there will be a TS error here until we remove those fragments and get the type in-line\n                lines: flattenConnection(dataCart.lines),\n                note: (_b = dataCart.note) !== null && _b !== void 0 ? _b : undefined,\n            });\n            updateCheckoutUrl(dataCart.checkoutUrl);\n        }\n    }, [cartFragment, fetch]);\n    return { cart, checkoutUrl, error, createInstantCheckout };\n}\n"],"names":["useState"],"mappings":"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"}