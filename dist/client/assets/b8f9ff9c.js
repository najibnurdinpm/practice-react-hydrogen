var ie=Object.defineProperty,se=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var V=(e,n,r)=>n in e?ie(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,h=(e,n)=>{for(var r in n||(n={}))J.call(n,r)&&V(e,r,n[r]);if(E)for(var r of E(n))G.call(n,r)&&V(e,r,n[r]);return e},C=(e,n)=>se(e,ae(n));var z=(e,n)=>{var r={};for(var t in e)J.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&E)for(var t of E(e))n.indexOf(t)<0&&G.call(e,t)&&(r[t]=e[t]);return r};import{r as u,R as q,a as m,j as M,F as le}from"./index.12980c00.js";import"./d6a88cd5.js";import"./17dc894b.js";import"./eb35c225.js";import"./8a56554b.js";import"./55bbc67b.js";import"./0583b56d.js";import"./65c187cb.js";import{LocalizationContext as ue}from"./5e219092.js";import"./79813ae6.js";import"./5f7af73e.js";import{p as ce}from"./a5164085.js";import pe from"./cce65085.js";import{t as S,i as de,H as D,T as A,u as L,w as fe,m as ve,e as U,h as xe,f as be,y as me,A as F,I as Q,o as x,r as he,d as W,s as ye,a as ge,S as Oe,n as Se,v as Re}from"./8d3d07f5.js";function Ce(e){return(e instanceof Array?e:[e]).map(r=>JSON.stringify(r)).join("")}const B={};function we(e,n,r=!1){const t=Ce(e);if(B[t]){const i=B[t];if(r)return;if(i.error)throw i.error;if(i.response)return i.response;if(!r)throw i.promise}const o={promise:n().then(i=>o.response=i).catch(i=>o.error=i)};if(B[t]=o,!r)throw o.promise}const Ie=(e,n)=>we(e,n);function Le(){const e=u.exports.useContext(ue);if(e==null)throw new Error("No Localization Context available");return e}function ke(){return[Le().country]}function Pe(e,n){const[r,t]=Ie([e,n],async()=>{const o=await globalThis.fetch(e,n);return[await o.text(),o]});return{response:t,json:()=>ce(r),text:()=>r}}function j(){let e=[],n=[],r={enqueue(t){n.push(t)},addEventListener(t,o,i,s){return t.addEventListener(o,i,s),r.add(()=>t.removeEventListener(o,i,s))},requestAnimationFrame(...t){let o=requestAnimationFrame(...t);return r.add(()=>cancelAnimationFrame(o))},nextFrame(...t){return r.requestAnimationFrame(()=>r.requestAnimationFrame(...t))},setTimeout(...t){let o=setTimeout(...t);return r.add(()=>clearTimeout(o))},add(t){return e.push(t),()=>{let o=e.indexOf(t);if(o>=0){let[i]=e.splice(o,1);i()}}},dispose(){for(let t of e.splice(0))t()},async workQueue(){for(let t of n.splice(0))await t()}};return r}function _(){let[e]=u.exports.useState(j);return u.exports.useEffect(()=>()=>e.dispose(),[e]),e}function X(e,n){let[r,t]=u.exports.useState(e),o=de(e);return S(()=>t(o.current),[o,t,...n]),r}function Te(e){throw new Error("Unexpected object: "+e)}var R=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(R||{});function $e(e,n){let r=n.resolveItems();if(r.length<=0)return null;let t=n.resolveActiveIndex(),o=t!=null?t:-1,i=(()=>{switch(e.focus){case 0:return r.findIndex(s=>!n.resolveDisabled(s));case 1:{let s=r.slice().reverse().findIndex((l,p,y)=>o!==-1&&y.length-p-1>=o?!1:!n.resolveDisabled(l));return s===-1?s:r.length-1-s}case 2:return r.findIndex((s,l)=>l<=o?!1:!n.resolveDisabled(s));case 3:{let s=r.slice().reverse().findIndex(l=>!n.resolveDisabled(l));return s===-1?s:r.length-1-s}case 4:return r.findIndex(s=>n.resolveId(s)===e.id);case 5:return null;default:Te(e)}})();return i===-1?t:i}function Z(e){var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function De(e,n){let[r,t]=u.exports.useState(()=>Z(e));return S(()=>{t(Z(e))},[e.type,e.as]),S(()=>{r||!n.current||n.current instanceof HTMLButtonElement&&!n.current.hasAttribute("type")&&t("button")},[r,n]),r}function Y(e={},n=null,r=[]){for(let[t,o]of Object.entries(e))te(r,ee(n,t),o);return r}function ee(e,n){return e?e+"["+n+"]":n}function te(e,n,r){if(Array.isArray(r))for(let[t,o]of r.entries())te(e,ee(n,t.toString()),o);else r instanceof Date?e.push([n,r.toISOString()]):typeof r=="boolean"?e.push([n,r?"1":"0"]):typeof r=="string"?e.push([n,r]):typeof r=="number"?e.push([n,`${r}`]):r==null?e.push([n,""]):Y(r,n,e)}var Ae=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ae||{}),Fe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Fe||{}),Ne=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ne||{}),Ee=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.SetDisabled=2]="SetDisabled",e[e.SetOrientation=3]="SetOrientation",e[e.GoToOption=4]="GoToOption",e[e.Search=5]="Search",e[e.ClearSearch=6]="ClearSearch",e[e.RegisterOption=7]="RegisterOption",e[e.UnregisterOption=8]="UnregisterOption",e))(Ee||{});function K(e,n=r=>r){let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,t=Re(n(e.options.slice()),i=>i.dataRef.current.domRef.current),o=r?t.indexOf(r):null;return o===-1&&(o=null),{options:t,activeOptionIndex:o}}let Me={[1](e){return e.disabled||e.listboxState===1?e:C(h({},e),{activeOptionIndex:null,listboxState:1})},[0](e){if(e.disabled||e.listboxState===0)return e;let n=e.activeOptionIndex,{value:r,mode:t}=e.propsRef.current,o=e.options.findIndex(i=>{let s=i.dataRef.current.value;return L(t,{[1]:()=>r.includes(s),[0]:()=>r===s})});return o!==-1&&(n=o),C(h({},e),{listboxState:0,activeOptionIndex:n})},[2](e,n){return e.disabled===n.disabled?e:C(h({},e),{disabled:n.disabled})},[3](e,n){return e.orientation===n.orientation?e:C(h({},e),{orientation:n.orientation})},[4](e,n){var r;if(e.disabled||e.listboxState===1)return e;let t=K(e),o=$e(n,{resolveItems:()=>t.options,resolveActiveIndex:()=>t.activeOptionIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});return C(h(h({},e),t),{searchQuery:"",activeOptionIndex:o,activationTrigger:(r=n.trigger)!=null?r:1})},[5]:(e,n)=>{if(e.disabled||e.listboxState===1)return e;let r=e.searchQuery!==""?0:1,t=e.searchQuery+n.value.toLowerCase(),o=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find(s=>{var l;return!s.dataRef.current.disabled&&((l=s.dataRef.current.textValue)==null?void 0:l.startsWith(t))}),i=o?e.options.indexOf(o):-1;return i===-1||i===e.activeOptionIndex?C(h({},e),{searchQuery:t}):C(h({},e),{searchQuery:t,activeOptionIndex:i,activationTrigger:1})},[6](e){return e.disabled||e.listboxState===1||e.searchQuery===""?e:C(h({},e),{searchQuery:""})},[7]:(e,n)=>{let r={id:n.id,dataRef:n.dataRef},t=K(e,o=>[...o,r]);if(e.activeOptionIndex===null){let{value:o,mode:i}=e.propsRef.current,s=n.dataRef.current.value;L(i,{[1]:()=>o.includes(s),[0]:()=>o===s})&&(t.activeOptionIndex=t.options.indexOf(r))}return h(h({},e),t)},[8]:(e,n)=>{let r=K(e,t=>{let o=t.findIndex(i=>i.id===n.id);return o!==-1&&t.splice(o,1),t});return C(h(h({},e),r),{activationTrigger:1})}},H=u.exports.createContext(null);H.displayName="ListboxContext";function N(e){let n=u.exports.useContext(H);if(n===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,N),r}return n}function je(e,n){return L(n.type,Me,e,n)}let Qe=u.exports.Fragment,ze=D(function(e,n){let T=e,{value:r,name:t,onChange:o,disabled:i=!1,horizontal:s=!1,multiple:l=!1}=T,p=z(T,["value","name","onChange","disabled","horizontal","multiple"]);const y=s?"horizontal":"vertical";let O=A(n),w=u.exports.useReducer(je,{listboxState:1,propsRef:{current:{value:r,onChange:o,mode:l?1:0}},labelRef:u.exports.createRef(),buttonRef:u.exports.createRef(),optionsRef:u.exports.createRef(),disabled:i,orientation:y,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1}),[{listboxState:f,propsRef:g,optionsRef:k,buttonRef:v},a]=w;g.current.value=r,g.current.mode=l?1:0,S(()=>{g.current.onChange=b=>L(g.current.mode,{[0](){return o(b)},[1](){let d=g.current.value.slice(),I=d.indexOf(b);return I===-1?d.push(b):d.splice(I,1),o(d)}})},[o,g]),S(()=>a({type:2,disabled:i}),[i]),S(()=>a({type:3,orientation:y}),[y]),fe([v,k],(b,d)=>{var I;f===0&&(a({type:1}),Oe(d,Se.Loose)||(b.preventDefault(),(I=v.current)==null||I.focus()))});let c=u.exports.useMemo(()=>({open:f===0,disabled:i}),[f,i]),P={ref:O};return q.createElement(H.Provider,{value:w},q.createElement(ve,{value:L(f,{[0]:U.Open,[1]:U.Closed})},t!=null&&r!=null&&Y({[t]:r}).map(([b,d])=>q.createElement(xe,h({features:be.Hidden},me({key:b,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:b,value:d})))),F({ourProps:P,theirProps:p,slot:c,defaultTag:Qe,name:"Listbox"})))}),qe="button",Be=D(function(e,n){var r;let[t,o]=N("Listbox.Button"),i=A(t.buttonRef,n),s=`headlessui-listbox-button-${Q()}`,l=_(),p=u.exports.useCallback(v=>{switch(v.key){case x.Space:case x.Enter:case x.ArrowDown:v.preventDefault(),o({type:0}),l.nextFrame(()=>{t.propsRef.current.value||o({type:4,focus:R.First})});break;case x.ArrowUp:v.preventDefault(),o({type:0}),l.nextFrame(()=>{t.propsRef.current.value||o({type:4,focus:R.Last})});break}},[o,t,l]),y=u.exports.useCallback(v=>{switch(v.key){case x.Space:v.preventDefault();break}},[]),O=u.exports.useCallback(v=>{if(he(v.currentTarget))return v.preventDefault();t.listboxState===0?(o({type:1}),l.nextFrame(()=>{var a;return(a=t.buttonRef.current)==null?void 0:a.focus({preventScroll:!0})})):(v.preventDefault(),o({type:0}))},[o,l,t]),w=X(()=>{if(t.labelRef.current)return[t.labelRef.current.id,s].join(" ")},[t.labelRef.current,s]),f=u.exports.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled}),[t]),g=e,k={ref:i,id:s,type:De(e,t.buttonRef),"aria-haspopup":!0,"aria-controls":(r=t.optionsRef.current)==null?void 0:r.id,"aria-expanded":t.disabled?void 0:t.listboxState===0,"aria-labelledby":w,disabled:t.disabled,onKeyDown:p,onKeyUp:y,onClick:O};return F({ourProps:k,theirProps:g,slot:f,defaultTag:qe,name:"Listbox.Button"})}),Ke="label",Ue=D(function(e,n){let[r]=N("Listbox.Label"),t=`headlessui-listbox-label-${Q()}`,o=A(r.labelRef,n),i=u.exports.useCallback(()=>{var l;return(l=r.buttonRef.current)==null?void 0:l.focus({preventScroll:!0})},[r.buttonRef]),s=u.exports.useMemo(()=>({open:r.listboxState===0,disabled:r.disabled}),[r]);return F({ourProps:{ref:o,id:t,onClick:i},theirProps:e,slot:s,defaultTag:Ke,name:"Listbox.Label"})}),_e="ul",He=W.RenderStrategy|W.Static,Ve=D(function(e,n){var r;let[t,o]=N("Listbox.Options"),i=A(t.optionsRef,n),s=`headlessui-listbox-options-${Q()}`,l=_(),p=_(),y=ye(),O=(()=>y!==null?y===U.Open:t.listboxState===0)();u.exports.useEffect(()=>{var a;let c=t.optionsRef.current;!c||t.listboxState===0&&c!==((a=ge(c))==null?void 0:a.activeElement)&&c.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let w=u.exports.useCallback(a=>{switch(p.dispose(),a.key){case x.Space:if(t.searchQuery!=="")return a.preventDefault(),a.stopPropagation(),o({type:5,value:a.key});case x.Enter:if(a.preventDefault(),a.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:c}=t.options[t.activeOptionIndex];t.propsRef.current.onChange(c.current.value)}t.propsRef.current.mode===0&&(o({type:1}),j().nextFrame(()=>{var c;return(c=t.buttonRef.current)==null?void 0:c.focus({preventScroll:!0})}));break;case L(t.orientation,{vertical:x.ArrowDown,horizontal:x.ArrowRight}):return a.preventDefault(),a.stopPropagation(),o({type:4,focus:R.Next});case L(t.orientation,{vertical:x.ArrowUp,horizontal:x.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),o({type:4,focus:R.Previous});case x.Home:case x.PageUp:return a.preventDefault(),a.stopPropagation(),o({type:4,focus:R.First});case x.End:case x.PageDown:return a.preventDefault(),a.stopPropagation(),o({type:4,focus:R.Last});case x.Escape:return a.preventDefault(),a.stopPropagation(),o({type:1}),l.nextFrame(()=>{var c;return(c=t.buttonRef.current)==null?void 0:c.focus({preventScroll:!0})});case x.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(o({type:5,value:a.key}),p.setTimeout(()=>o({type:6}),350));break}},[l,o,p,t]),f=X(()=>{var a,c,P;return(P=(a=t.labelRef.current)==null?void 0:a.id)!=null?P:(c=t.buttonRef.current)==null?void 0:c.id},[t.labelRef.current,t.buttonRef.current]),g=u.exports.useMemo(()=>({open:t.listboxState===0}),[t]),k=e,v={"aria-activedescendant":t.activeOptionIndex===null||(r=t.options[t.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":t.propsRef.current.mode===1?!0:void 0,"aria-labelledby":f,"aria-orientation":t.orientation,id:s,onKeyDown:w,role:"listbox",tabIndex:0,ref:i};return F({ourProps:v,theirProps:k,slot:g,defaultTag:_e,features:He,visible:O,name:"Listbox.Options"})}),Je="li",Ge=D(function(e,n){let T=e,{disabled:r=!1,value:t}=T,o=z(T,["disabled","value"]),[i,s]=N("Listbox.Option"),l=`headlessui-listbox-option-${Q()}`,p=i.activeOptionIndex!==null?i.options[i.activeOptionIndex].id===l:!1,y=L(i.propsRef.current.mode,{[1]:()=>i.propsRef.current.value.includes(t),[0]:()=>i.propsRef.current.value===t}),O=u.exports.useRef(null),w=A(n,O);S(()=>{if(i.listboxState!==0||!p||i.activationTrigger===0)return;let b=j();return b.requestAnimationFrame(()=>{var d,I;(I=(d=O.current)==null?void 0:d.scrollIntoView)==null||I.call(d,{block:"nearest"})}),b.dispose},[O,p,i.listboxState,i.activationTrigger,i.activeOptionIndex]);let f=u.exports.useRef({disabled:r,value:t,domRef:O});S(()=>{f.current.disabled=r},[f,r]),S(()=>{f.current.value=t},[f,t]),S(()=>{var b,d;f.current.textValue=(d=(b=O.current)==null?void 0:b.textContent)==null?void 0:d.toLowerCase()},[f,O]);let g=u.exports.useCallback(()=>i.propsRef.current.onChange(t),[i.propsRef,t]);S(()=>(s({type:7,id:l,dataRef:f}),()=>s({type:8,id:l})),[f,l]);let k=u.exports.useCallback(b=>{if(r)return b.preventDefault();g(),i.propsRef.current.mode===0&&(s({type:1}),j().nextFrame(()=>{var d;return(d=i.buttonRef.current)==null?void 0:d.focus({preventScroll:!0})}))},[s,i.buttonRef,r,g]),v=u.exports.useCallback(()=>{if(r)return s({type:4,focus:R.Nothing});s({type:4,focus:R.Specific,id:l})},[r,l,s]),a=u.exports.useCallback(()=>{r||p||s({type:4,focus:R.Specific,id:l,trigger:0})},[r,p,l,s]),c=u.exports.useCallback(()=>{r||!p||s({type:4,focus:R.Nothing})},[r,p,s]),P=u.exports.useMemo(()=>({active:p,selected:y,disabled:r}),[p,y,r]);return F({ourProps:{id:l,ref:w,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":y===!0?!0:void 0,disabled:void 0,onClick:k,onFocus:v,onPointerMove:a,onMouseMove:a,onPointerLeave:c,onMouseLeave:c},theirProps:o,slot:P,defaultTag:Je,name:"Listbox.Option"})}),$=Object.assign(ze,{Button:Be,Label:Ue,Options:Ve,Option:Ge});function We(){const[e,n]=u.exports.useState(!1),[r]=ke(),t=u.exports.useCallback(({isoCode:o,name:i})=>{fetch("/countries",{body:JSON.stringify({isoCode:o,name:i}),method:"POST"}).then(()=>{window.location.reload()})},[]);return m("div",{className:"hidden lg:block",children:m($,{onChange:t,children:({open:o})=>(setTimeout(()=>n(o)),M(le,{children:[M($.Button,{className:"font-medium text-sm h-8 p-2 flex items-center",children:[m("span",{className:"mr-4",children:r.name}),m(oe,{isOpen:o})]}),m($.Options,{className:"absolute z-10 mt-2",children:M("div",{className:"bg-white p-4 rounded-lg drop-shadow-2xl overflow-y-auto h-64",children:[m($.Option,{disabled:!0,className:"p-2 text-md text-left font-medium uppercase",children:"Country"}),e&&m(u.exports.Suspense,{fallback:m("div",{className:"flex justify-center",children:m(pe,{})}),children:m(re,{selectedCountry:r,getClassName:i=>`w-36 py-2 px-3 flex justify-between items-center text-left cursor-pointerrounded ${i?"bg-gray-200":null}`})})]})})]}))})})}function re({selectedCountry:e,getClassName:n}){return Pe("/countries").json().map(t=>{const o=t.isoCode===e.isoCode;return m($.Option,{value:t,children:({active:i})=>M("div",{className:n(i),children:[t.name,o?m(ne,{}):null]})},t.isoCode)})}function ne(){return m("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:m("path",{d:"M7 10L9 12L13 8M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z",stroke:"#354CF6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function oe({isOpen:e}){return m("svg",{className:`transition-transform duration-300 ${e?"rotate-180":null}`,"aria-hidden":"true",width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292893 0.292893C0.683416 -0.097631 1.31658 -0.097631 1.7071 0.292893L4.99999 3.58579L8.29288 0.292893C8.6834 -0.0976311 9.31657 -0.0976311 9.70709 0.292893C10.0976 0.683417 10.0976 1.31658 9.70709 1.70711L5.7071 5.70711C5.31657 6.09763 4.68341 6.09763 4.29289 5.70711L0.292893 1.70711C-0.0976309 1.31658 -0.0976309 0.683417 0.292893 0.292893Z",fill:"#374151"})})}var dt=Object.freeze(Object.defineProperty({__proto__:null,default:We,Countries:re,CheckIcon:ne,ArrowIcon:oe},Symbol.toStringTag,{value:"Module"}));export{oe as A,re as C,dt as a,$ as t,ke as u};
//# sourceMappingURL=b8f9ff9c.js.map
